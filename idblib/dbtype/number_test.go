/*
 * Copyright (c) 2023 Lucas Pape
 */

package dbtype

import (
	"testing"
)

func TestNumberFromString(t *testing.T) {
	cases := []struct {
		i string
		o string
	}{
		{i: "0.0", o: "0"},
		{i: "1.0", o: "1"},
		{i: "-1.0", o: "-1"},
		{i: "123.456"},
		{i: "-9876543210.123456789"},
		{i: "0.000000000000000000000000000000000000000000000000000000000000000000000000000000000001"},
		{i: "999999999999999999999999999999999999999999999999999999999999.0000000000000000000000000000000000000001"},
		{i: "-999999999999999999999999999999999999999999999999999999999999.0000000000000000000000000000000000000001"},
		{i: "123456789123456789123456789123456789123456789.123456789012345678901234567890123456789"},
		{i: "-123456789123456789123456789123456789123456789.123456789012345678901234567890123456789"},
	}

	for i, c := range cases {
		if len(c.o) == 0 {
			cases[i].o = c.i
		}
	}

	for _, tc := range cases {
		n, err := NumberFromString(tc.i)

		if err != nil {
			t.Errorf("expected number, function returned %s", err.Error())
		}

		s := n.ToString()

		if s != tc.o {
			t.Errorf("Expected %s, but got %s", tc.o, s)
		}
	}
}
